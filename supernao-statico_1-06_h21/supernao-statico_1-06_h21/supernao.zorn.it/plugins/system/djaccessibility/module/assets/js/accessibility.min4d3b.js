"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,o=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return c=t.done,t},e:function(t){o=!0,i=t},f:function(){try{c||null==r.return||r.return()}finally{if(o)throw i}}}}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _regeneratorRuntime(){_regeneratorRuntime=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",o=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,a){var i=e&&e.prototype instanceof h?e:h,c=Object.create(i.prototype),o=new w(a||[]);return n(c,"_invoke",{value:L(t,r,o)}),c}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var u={};function h(){}function f(){}function p(){}var v={};s(v,i,function(){return this});var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==e&&r.call(g,i)&&(v=g);var m=p.prototype=h.prototype=Object.create(v);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function j(t,e){var a;n(this,"_invoke",{value:function(n,i){function c(){return new e(function(a,c){!function n(a,i,c,o){var s=d(t[a],t,i);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==_typeof(u)&&r.call(u,"__await")?e.resolve(u.__await).then(function(t){n("next",t,c,o)},function(t){n("throw",t,c,o)}):e.resolve(u).then(function(t){l.value=t,c(l)},function(t){return n("throw",t,c,o)})}o(s.arg)}(n,i,a,c)})}return a=a?a.then(c,c):c()}})}function L(t,e,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return x()}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var o=b(c,r);if(o){if(o===u)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=d(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===u)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function b(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),u;var a=d(n,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,u;var i=a.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:x}}function x(){return{value:void 0,done:!0}}return f.prototype=p,n(m,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,o,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(j.prototype),s(j.prototype,c,function(){return this}),t.AsyncIterator=j,t.async=function(e,r,n,a,i){void 0===i&&(i=Promise);var c=new j(l(e,r,n,a),i);return t.isGeneratorFunction(r)?c:c.next().then(function(t){return t.done?t.value:c.next()})},_(m),s(m,o,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=E,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return c.type="throw",c.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var o=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(o&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var c=i?i.completion:{};return c.type=t,c.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function asyncGeneratorStep(t,e,r,n,a,i,c){try{var o=t[i](c),s=o.value}catch(t){return void r(t)}o.done?e(s):Promise.resolve(s).then(n,a)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise(function(n,a){var i=t.apply(e,r);function c(t){asyncGeneratorStep(i,n,a,c,o,"next",t)}function o(t){asyncGeneratorStep(i,n,a,c,o,"throw",t)}c(void 0)})}}function ownKeys(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(r),!0).forEach(function(e){_defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function _defineProperty(t,e,r){return(e=_toPropertyKey(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var DJAccessibility=function(){function t(e){var r=this;_classCallCheck(this,t),_defineProperty(this,"handleScreenReaderClick",function(t){r.screenReaderEvent(t,r.options)});this.options=_objectSpread(_objectSpread({},{target:"#djacc",speech_pitch:1,speech_rate:1,speech_volume:1}),e),this.page=document.documentElement,this.state={},this.nodes={},this.textNodes={},this.ver=this.getVersion(),this.init()}return _createClass(t,[{key:"init",value:function(){var t=this;document.addEventListener("DOMContentLoaded",function(){t.container=document.querySelector(".djacc"),t.container?t.showPanel():t.ajaxLoad()})}},{key:"showPanel",value:function(){var t=this;t.container&&(t.panel=t.container.querySelector(".djacc__panel"),t.registerEvents(),t.parseURL(),t.setVersion(),t.container.classList.contains("djacc--custom")?t.setStaticPosition():(t.container.classList.remove("djacc--hidden"),t.setPanelSize(),t.reserveSpace(),t.setMobilePosition(),t.updateDirection(),window.addEventListener("resize",function(e){t.setPanelSize(),t.reserveSpace(),t.setMobilePosition()})),window.addEventListener("resize",function(e){t.updateDirection()}))}},{key:"ajaxLoad",value:function(){var t=_asyncToGenerator(_regeneratorRuntime().mark(function t(){var e,r,n;return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.options.ajax_url){t.next=2;break}return t.abrupt("return");case 2:return(e=new FormData).append("action",this.options.ajax_action),t.next=6,fetch(this.options.ajax_url,{method:"POST",credentials:"same-origin",body:e});case 6:return r=t.sent,t.next=9,r.text();case 9:n=t.sent,200===r.status&&(document.body.insertAdjacentHTML("afterbegin",n),this.container=document.querySelector(".djacc"),this.showPanel());case 11:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"parseURL",value:function(){if(window.location.hash){var t=window.location.hash.substring(1);t.replaceAll(/[^A-Za-z0-9_-]+/g,""),t.replace("djacc-","");var e=document.querySelector(".djacc__btn--"+t);e&&e.click()}}},{key:"setStaticPosition",value:function(){var t=this.options.target,e=document.querySelector(t);e&&(this.container.classList.remove("djacc--hidden"),this.container.classList.add("djacc--static"),e.append(this.container))}},{key:"addState",value:function(t,e){this.state[t]=e,this.saveCookie(this.state)}},{key:"removeState",value:function(t){delete this.state[t],0===Object.keys(this.state).length?this.removeCookie():this.saveCookie(this.state)}},{key:"setState",value:function(){var t=this.getCookie();if(t)for(var e in t=JSON.parse(t))if("contrast"===e||"links"===e||"titles"===e||"sr"===e){var r=t[e],n=document.querySelector(".djacc__btn.djacc__btn--"+r);n&&n.click()}else{var a=document.querySelector(".djacc__arrows.djacc__arrows--"+e);if(a)for(var i=t[e],c=a.querySelector(".djacc__inc"),o=a.querySelector(".djacc__dec"),s=0;s<Math.abs(i);s++)i<0?o.click():c.click()}}},{key:"setPanelSize",value:function(){if(!this.container.classList.contains("djacc--static")){var t,e=this.panel.getBoundingClientRect();if(this.container.classList.contains("djacc--bottom-left")||this.container.classList.contains("djacc--bottom-right")||this.container.classList.contains("djacc--bottom-center")){var r=window.screen.height-e.bottom;t=window.screen.height-r}else t=window.screen.height-e.top;t>0&&(this.container.classList.contains("djacc-toolbar")?this.panel.querySelector(".djacc__list").style.maxHeight=t+"px":this.panel.style.maxHeight=t+"px")}}},{key:"reserveSpace",value:function(){if(!this.container.classList.contains("djacc--static")&&this.container.classList.contains("djacc-toolbar")&&0!=this.options.space){var t=this.panel.querySelector(".djacc__list"),e=window.getComputedStyle(this.container),r=t.scrollWidth,n=parseInt(e.marginLeft),a=t.scrollHeight,i=parseInt(e.marginTop);this.container.classList.contains("djacc--center-left")?document.body.style.paddingLeft=r+n+"px":this.container.classList.contains("djacc--center-right")?document.body.style.paddingRight=r+n+"px":this.container.classList.contains("djacc--top-left")||this.container.classList.contains("djacc--top-right")||this.container.classList.contains("djacc--top-center")?document.body.style.paddingTop=a+i+"px":document.body.style.paddingBottom=a+i+"px"}}},{key:"updateDirection",value:function(){if(!this.container.classList.contains("djacc-toolbar")){var t=this.panel.getBoundingClientRect();(this.container.classList.contains("djacc--top-right")||this.container.classList.contains("djacc--bottom-right"))&&(t.left<0?this.container.classList.add("djacc--direction"):this.container.classList.contains("djacc--direction")&&this.container.classList.remove("djacc--direction")),(this.container.classList.contains("djacc--top-left")||this.container.classList.contains("djacc--bottom-left"))&&(window.innerWidth<t.right?this.container.classList.add("djacc--direction"):this.container.classList.contains("djacc--direction")&&this.container.classList.remove("djacc--direction"))}}},{key:"setMobilePosition",value:function(){if(!this.container.classList.contains("djacc--static")&&!this.container.classList.contains("djacc-toolbar")&&0!=this.options.align_mobile){var t=this.options.yootheme?getComputedStyle(document.body).getPropertyValue("--uk-breakpoint-s").slice(0,-2):this.options.breakpoint,e=parseInt(t),r=window.innerWidth,n="djacc--"+this.options.align_position.replace(" ","-"),a="djacc--"+this.options.align_mobile_position.replace(" ","-");r<=e?this.container.classList.contains(n)&&(this.container.classList.add(a),this.container.classList.remove(n)):this.container.classList.contains(a)&&(this.container.classList.add(n),this.container.classList.remove(a))}}},{key:"registerEvents",value:function(){var t=this,e=document.querySelector(".djacc__openbtn");e&&e.addEventListener("click",function(e){t.panel.classList.toggle("djacc__panel--active"),this.classList.toggle("djacc__openbtn--active"),t.page.classList.toggle("djacc-opened")});var r=function(t){if(t.classList.contains("djacc__btn--active"))t.classList.remove("djacc__btn--active");else{var e=_toConsumableArray(document.querySelectorAll(".djacc__item--contrast > .djacc__btn"));if(e){var r,n=_createForOfIteratorHelper(e);try{for(n.s();!(r=n.n()).done;){r.value.classList.remove("djacc__btn--active")}}catch(t){n.e(t)}finally{n.f()}}t.classList.add("djacc__btn--active")}},n=document.querySelector(".djacc__close");if(n&&(n.addEventListener("click",function(r){t.panel.classList.remove("djacc__panel--active"),e&&e.classList.remove("djacc__openbtn--active"),t.page.classList.remove("djacc-opened")}),!t.container.classList.contains("djacc--toolbar"))){var a=t.panel.querySelectorAll('button, [href], input, [tabindex="0"]'),i=a[0],c=a[a.length-1];i.addEventListener("keydown",function(t){"Tab"===t.key&&t.shiftKey&&setTimeout(function(){n.click(),e.focus()},300)}),c.addEventListener("keydown",function(t){"Tab"!==t.key||t.shiftKey||setTimeout(function(){n.click(),e.focus()},300)}),document.addEventListener("keyup",function(e){"Escape"!=e.key&&"Esc"!=e.key||!t.page.classList.contains("djacc-opened")||setTimeout(function(){n.click()},300)})}var o=document.querySelector(".djacc__reset");o&&o.addEventListener("click",function(e){var r=document.querySelectorAll(".djacc__item > .djacc__btn, .djacc__item > .djacc__arrows");if(r){var n,a=_createForOfIteratorHelper(r);try{for(a.s();!(n=a.n()).done;){n.value.classList.remove("djacc__btn--active","djacc__arrows--active")}}catch(t){a.e(t)}finally{a.f()}}var i=document.querySelectorAll(".djacc__size");if(i){var c,o=_createForOfIteratorHelper(i);try{for(o.s();!(c=o.n()).done;){var s=c.value;s.innerHTML="100%",s.parentNode.removeAttribute("data-djacc-count")}}catch(t){o.e(t)}finally{o.f()}}t.page.classList.contains("djacc-font-size")&&t.updateTextStyle("font-size",0),t.page.classList.contains("djacc-line-height")&&t.updateTextStyle("line-height",0),t.page.classList.contains("djacc-letter-spacing")&&t.updateTextStyle("letter-spacing",0),t.page.classList.contains("djacc-highlight-links")&&t.updateLinks(),t.page.classList.contains("djacc-highlight-titles")&&t.updateTitles(),t.page.classList.contains("djacc-screen-reader")&&t.screenReader(),t.page.style.filter="",t.page.style.zoom="",t.removeCookie(),t.clearClasses(),t.page.classList.contains("djacc-read-mode")&&window.location.reload(!1)});var s=document.querySelector(".djacc__btn.djacc__btn--invert-colors");s&&s.addEventListener("click",function(e){r(this),t.contrastInvert()});var l=document.querySelector(".djacc__btn.djacc__btn--monochrome");l&&l.addEventListener("click",function(e){r(this),t.contrastMono()});var d=document.querySelector(".djacc__btn.djacc__btn--low-saturation");d&&d.addEventListener("click",function(e){r(this),t.contrastLowSaturation()});var u=document.querySelector(".djacc__btn.djacc__btn--high-saturation");u&&u.addEventListener("click",function(e){r(this),t.contrastHighSaturation()});var h=document.querySelector(".djacc__btn.djacc__btn--dark-contrast");h&&h.addEventListener("click",function(e){r(this),t.contrastDark()});var f=document.querySelector(".djacc__btn.djacc__btn--light-contrast");f&&f.addEventListener("click",function(e){r(this),t.contrastLight()});var p=document.querySelector(".djacc__btn.djacc__btn--highlight-links");p&&p.addEventListener("click",function(e){this.classList.toggle("djacc__btn--active"),t.highlightLinks()});var v=document.querySelector(".djacc__btn.djacc__btn--highlight-titles");v&&v.addEventListener("click",function(e){this.classList.toggle("djacc__btn--active"),t.highlightTitles()});var y=document.querySelector(".djacc__btn.djacc__btn--read-mode");y&&y.addEventListener("click",function(e){this.classList.toggle("djacc__btn--active"),t.readMode(y)});var g=document.querySelector(".djacc__btn.djacc__btn--screen-reader");g&&("speechSynthesis"in window?g.addEventListener("click",function(e){e.stopPropagation(),this.classList.toggle("djacc__btn--active"),t.screenReader()}):g.remove());var m=document.querySelector(".djacc__arrows--zoom .djacc__inc");m&&m.addEventListener("click",function(e){var r=t.countClicks(this.parentNode,"+");t.zoomPage(r)});var _=document.querySelector(".djacc__arrows--zoom .djacc__dec");_&&_.addEventListener("click",function(e){var r=t.countClicks(this.parentNode,"-");t.zoomPage(r)});var j=document.querySelector(".djacc__arrows--font-size .djacc__inc");j&&j.addEventListener("click",function(e){var r=t.countClicks(this.parentNode,"+");t.updateTextStyle("font-size",r)});var L=document.querySelector(".djacc__arrows--font-size .djacc__dec");L&&L.addEventListener("click",function(e){var r=t.countClicks(this.parentNode,"-");t.updateTextStyle("font-size",r)});var b=document.querySelector(".djacc__arrows--line-height .djacc__inc");b&&b.addEventListener("click",function(e){var r=t.countClicks(this.parentNode,"+");t.updateTextStyle("line-height",r)});var k=document.querySelector(".djacc__arrows--line-height .djacc__dec");k&&k.addEventListener("click",function(e){var r=t.countClicks(this.parentNode,"-");t.updateTextStyle("line-height",r)});var S=document.querySelector(".djacc__arrows--letter-spacing .djacc__inc");S&&S.addEventListener("click",function(e){var r=t.countClicks(this.parentNode,"+");t.updateTextStyle("letter-spacing",r)});var w=document.querySelector(".djacc__arrows--letter-spacing .djacc__dec");w&&w.addEventListener("click",function(e){var r=t.countClicks(this.parentNode,"-");t.updateTextStyle("letter-spacing",r)}),this.setState()}},{key:"contrastInvert",value:function(){this.page.classList.contains("djacc-invert-colors")?(this.removeState("contrast"),this.page.classList.remove("djacc-invert-colors"),this.page.style.filter=""):(this.clearContrast(),this.addState("contrast","invert-colors"),this.page.classList.add("djacc-invert-colors"),this.page.style.filter="invert(100%)")}},{key:"contrastMono",value:function(){this.page.classList.contains("djacc-monochrome")?(this.removeState("contrast"),this.page.classList.remove("djacc-monochrome"),this.page.style.filter=""):(this.clearContrast(),this.addState("contrast","monochrome"),this.page.classList.add("djacc-monochrome"),this.page.style.filter="grayscale(100%)")}},{key:"contrastLowSaturation",value:function(){this.page.classList.contains("djacc-low-saturation")?(this.removeState("contrast"),this.page.classList.remove("djacc-low-saturation"),this.page.style.filter=""):(this.clearContrast(),this.addState("contrast","low-saturation"),this.page.classList.add("djacc-low-saturation"),this.page.style.filter="saturate(50%)")}},{key:"contrastHighSaturation",value:function(){this.page.classList.contains("djacc-high-saturation")?(this.removeState("contrast"),this.page.classList.remove("djacc-high-saturation"),this.page.style.filter=""):(this.clearContrast(),this.addState("contrast","high-saturation"),this.page.classList.add("djacc-high-saturation"),this.page.style.filter="saturate(200%)")}},{key:"contrastDark",value:function(){this.page.classList.contains("djacc-dark-contrast")?(this.removeState("contrast"),this.page.classList.remove("djacc-dark-contrast"),this.updateContrastElements()):(this.clearContrast(),this.addState("contrast","dark-contrast"),this.page.classList.add("djacc-dark-contrast"),this.updateContrastElements(1))}},{key:"contrastLight",value:function(){this.page.classList.contains("djacc-light-contrast")?(this.removeState("contrast"),this.page.classList.remove("djacc-light-contrast"),this.updateContrastElements()):(this.clearContrast(),this.addState("contrast","light-contrast"),this.page.classList.add("djacc-light-contrast"),this.updateContrastElements(1))}},{key:"highlightLinks",value:function(){this.page.classList.contains("djacc-highlight-links")?(this.removeState("links"),this.page.classList.remove("djacc-highlight-links"),this.updateLinks()):(this.addState("links","highlight-links"),this.page.classList.add("djacc-highlight-links"),this.updateLinks(1))}},{key:"highlightTitles",value:function(){this.page.classList.contains("djacc-highlight-titles")?(this.removeState("titles"),this.page.classList.remove("djacc-highlight-titles"),this.updateTitles()):(this.addState("titles","highlight-titles"),this.page.classList.add("djacc-highlight-titles"),this.updateTitles(1))}},{key:"readMode",value:function(t){if(this.page.classList.contains("djacc-read-mode"))window.location.reload(!1);else{this.page.classList.add("djacc-read-mode");var e,r=_createForOfIteratorHelper(document.querySelectorAll("nav, header, footer, aside, iframe, canvas, img, form, [uk-modal], [uk-sticky], .uk-slider"));try{for(r.s();!(e=r.n()).done;){e.value.remove()}}catch(t){r.e(t)}finally{r.f()}var n,a=_createForOfIteratorHelper(this.getNodes("readmode"));try{for(a.s();!(n=a.n()).done;){var i=n.value;i.removeAttribute("style"),i.removeAttribute("id"),i.removeAttribute("class"),i.removeAttribute("uk-scrollspy"),i.removeAttribute("uk-grid"),i.removeAttribute("uk-img"),i.removeAttribute("uk-parallax"),i.removeAttribute("uk-scrollspy-class"),i.removeAttribute("uk-filter")}}catch(t){a.e(t)}finally{a.f()}var c=document.createElement("button");c.classList.add("djacc-readmode-disable"),c.innerHTML=t.getAttribute("data-label")||"Disable readmode",c.addEventListener("click",function(){window.location.reload(!1)}),document.body.prepend(c)}}},{key:"screenReader",value:function(){if(this.page.classList.contains("djacc-screen-reader")){this.removeState("sr"),this.page.classList.remove("djacc-screen-reader");var t,e=_createForOfIteratorHelper(document.querySelectorAll(".djacc-reader"));try{for(e.s();!(t=e.n()).done;){t.value.classList.remove("djacc-reader")}}catch(t){e.e(t)}finally{e.f()}window.speechSynthesis.cancel(),document.body.removeEventListener("click",this.handleScreenReaderClick,!0),document.body.removeEventListener("focus",this.handleScreenReaderClick,!0)}else this.addState("sr","screen-reader"),this.page.classList.add("djacc-screen-reader"),document.body.addEventListener("click",this.handleScreenReaderClick,!0),document.body.addEventListener("focus",this.handleScreenReaderClick,!0)}},{key:"screenReaderEvent",value:function(t,e){var r=t.target;if(r){var n=document.documentElement.getAttribute("lang"),a=r.innerText;if(a){var i,c=_createForOfIteratorHelper(document.querySelectorAll(".djacc-reader"));try{for(c.s();!(i=c.n()).done;){i.value.classList.remove("djacc-reader")}}catch(t){c.e(t)}finally{c.f()}window.speechSynthesis.cancel();var o=new SpeechSynthesisUtterance;r.classList.add("djacc-reader"),o.text=a,o.volume=e.speech_volume,o.rate=e.speech_rate,o.pitch=e.speech_pitch,n&&(o.lang=n),o.onend=function(t){setTimeout(function(){t.target.accElement.classList.remove("djacc-reader")},500)},o.accElement=r,window.speechSynthesis.speak(o)}}}},{key:"updateContrastElements",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=_createForOfIteratorHelper(this.getNodes());try{for(r.s();!(t=r.n()).done;){var n=t.value;e?n.classList.add("djacc-contrast"):n.classList.remove("djacc-contrast")}}catch(t){r.e(t)}finally{r.f()}}},{key:"updateLinks",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=_createForOfIteratorHelper(this.getNodes("links",function(t){return"A"==t.tagName?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}));try{for(r.s();!(t=r.n()).done;){var n=t.value;e?n.classList.add("djacc-link"):n.classList.remove("djacc-link")}}catch(t){r.e(t)}finally{r.f()}}},{key:"updateTitles",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=_createForOfIteratorHelper(this.getNodes("titles",function(t){switch(t.tagName){case"H1":case"H2":case"H3":case"H4":case"H5":return NodeFilter.FILTER_ACCEPT;default:return NodeFilter.FILTER_SKIP}}));try{for(r.s();!(t=r.n()).done;){var n=t.value;e?n.classList.add("djacc-title"):n.classList.remove("djacc-title")}}catch(t){r.e(t)}finally{r.f()}}},{key:"countClicks",value:function(t,e){t.classList.contains("djacc__arrows--active")||t.classList.add("djacc__arrows--active"),t.hasAttribute("data-djacc-count")||t.setAttribute("data-djacc-count",0);var r=t.getAttribute("data-djacc-count"),n=t.querySelector(".djacc__size");if("+"===e){t.setAttribute("data-djacc-count",++r);var a=100*(1+.1*r);n.innerHTML=parseInt(a)+"%"}else{t.setAttribute("data-djacc-count",--r);var i=100*(1+.1*r);n.innerHTML=parseInt(i)+"%"}return 0===r&&t.classList.remove("djacc__arrows--active"),t.getAttribute("data-djacc-count")}},{key:"zoomPage",value:function(t){t=parseInt(t);var e=void 0!==this.page.style.zoom;this.page;if(0!==t){var r=1+.1*t;this.addState("zoom",t),this.page.classList.add("djacc-zoom"),e?this.page.style.zoom=r:(this.page.style.transform="scale("+r+")",this.page.style.transformOrigin="center top",document.body.scrollLeft=(document.body.scrollWidth-document.body.clientWidth)/2)}else this.removeState("zoom"),this.page.classList.remove("djacc-zoom"),e?this.page.style.zoom="":(this.page.style.transform="",this.page.style.transformOrigin="")}},{key:"getCurrentStyle",value:function(t,e){return window.getComputedStyle(t).getPropertyValue(e)}},{key:"setTextData",value:function(t){for(var e=0,r=["font-size","line-height","letter-spacing"];e<r.length;e++){var n=r[e],a="data-djacc-"+n;if(!t.hasAttribute(a)){var i=this.getCurrentStyle(t,n);t.setAttribute(a,i)}}}},{key:"updateTextStyle",value:function(t,e){var r,n=this.getTextNodes(),a="data-djacc-"+t,i="djacc-"+t,c=t;if(0===(e=parseInt(e))?(this.removeState(t),this.page.classList.remove(i)):(this.addState(t,e),this.page.classList.add(i)),"font-size"===t?(c="fontSize",r="16px"):"line-height"===t?(c="lineHeight",r="16px"):"letter-spacing"===t&&(c="letterSpacing",r="1px"),n){var o,s=_createForOfIteratorHelper(n);try{for(s.s();!(o=s.n()).done;){var l=o.value;0!==e&&this.setTextData(l);var d=l.getAttribute(a);if(d)if(e>0||e<0){var u=1+.1*e,h=parseFloat(d);Number.isNaN(h)&&(h=parseFloat(r));var f=(h*u).toFixed(2)+"px";l.style[c]=f}else l.style[c]=d}}catch(t){s.e(t)}finally{s.f()}}}},{key:"clearContrast",value:function(){var t;(this.page.classList.contains("djacc-dark-contrast")||this.page.classList.contains("djacc-light-contrast"))&&this.updateContrastElements();(t=this.page.classList).remove.apply(t,["djacc-invert-colors","djacc-monochrome","djacc-low-saturation","djacc-high-saturation","djacc-dark-contrast","djacc-light-contrast"]),this.page.style.filter=""}},{key:"clearClasses",value:function(){var t;this.clearContrast();(t=this.page.classList).remove.apply(t,["djacc-font-size","djacc-line-height","djacc-letter-spacing","djacc-zoom","djacc-highlight-links","djacc-highlight-titles"])}},{key:"getTextNodes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body;if(t in this.textNodes)return this.textNodes[t];for(var r=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,function(t){return"SCRIPT"===t.parentNode.tagName||"STYLE"===t.parentNode.tagName?NodeFilter.FILTER_SKIP:t.parentNode.closest(".djacc-container")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT}),n=[];r.nextNode();){var a=r.currentNode;a.textContent.replace(/(\r\n|\n|\r|\t)/gm,"").trim().length&&n.push(a.parentNode)}return this.textNodes[t]=n,n}},{key:"getNodes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",e=arguments.length>1?arguments[1]:void 0;if(t in this.nodes)return this.nodes[t];e||(e=function(t){return 3===t.nodeType||8===t.nodeType?NodeFilter.FILTER_SKIP:t.closest(".djacc-container")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT});for(var r=document.createTreeWalker(document.body,NodeFilter.SHOW_ALL,e),n=[];r.nextNode();){var a=r.currentNode;n.push(a)}return this.nodes[t]=n,n}},{key:"getVersion",value:function(){return"dmVyc2lvbnBybw=="===this.options.version}},{key:"setVersion",value:function(){"dmVyc2lvbnBybw=="!==this.options.version&&(document.querySelector(".djacc__btn.djacc__btn--read-mode").remove(),document.querySelector(".djacc__btn.djacc__btn--screen-reader").remove())}},{key:"saveCookie",value:function(t){this.setCookie("dj-acc-cookie",JSON.stringify(t))}},{key:"removeCookie",value:function(){this.deleteCookie("dj-acc-cookie")}},{key:"getCookie",value:function(){return document.cookie.split("; ").reduce(function(t,e){var r=e.split("=");return"dj-acc-cookie"===r[0]?decodeURIComponent(r[1]):t},"")}},{key:"setCookie",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/",a=new Date(Date.now()+864e5*r).toUTCString();document.cookie=t+"="+encodeURIComponent(e)+"; expires="+a+"; path="+n+"; SameSite=Lax"}},{key:"deleteCookie",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/";this.setCookie(t,"",-1,e)}}]),t}();